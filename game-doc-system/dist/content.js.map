{"version":3,"file":"content.js","mappings":"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","sources":["webpack://game-doc-system/./src/prompts/claudeInterface.ts","webpack://game-doc-system/./src/prompts/promptManager.ts","webpack://game-doc-system/./src/shared/types.ts","webpack://game-doc-system/webpack/bootstrap","webpack://game-doc-system/webpack/runtime/define property getters","webpack://game-doc-system/webpack/runtime/hasOwnProperty shorthand","webpack://game-doc-system/webpack/runtime/make namespace object","webpack://game-doc-system/./src/content/content.ts"],"sourcesContent":["export class ClaudeInterface {\r\n  static async sendMessage(message: string, silent: boolean = false): Promise<string> {\r\n    console.log('ClaudeInterface.sendMessage: Starting to send message');\r\n    \r\n    try {\r\n      // Find the input field\r\n      console.log('ClaudeInterface.sendMessage: Finding input field');\r\n      const input = await this.findInput();\r\n      if (!input) {\r\n        throw new Error('Could not find input field');\r\n      }\r\n      console.log('ClaudeInterface.sendMessage: Found input field:', input.tagName);\r\n\r\n      // Clear any existing input first\r\n      await this.clearInput();\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n      // Set the message and trigger input event\r\n      console.log('ClaudeInterface.sendMessage: Setting message and triggering events');\r\n      this.setInputValue(input, message);\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n      // Try to find and click the submit button\r\n      console.log('ClaudeInterface.sendMessage: Looking for submit button');\r\n      const button = await this.findButton(input);\r\n\r\n      if (button) {\r\n        console.log('ClaudeInterface.sendMessage: Found button, clicking');\r\n        button.click();\r\n      } else {\r\n        // Fallback to Enter key if no button found\r\n        console.log('ClaudeInterface.sendMessage: No button found, trying Enter key');\r\n        this.simulateEnterKey(input);\r\n      }\r\n\r\n      // Wait for message to be sent and get response\r\n      console.log('ClaudeInterface.sendMessage: Waiting for message to appear');\r\n      const response = await this.waitForResponse();\r\n      console.log('ClaudeInterface.sendMessage: Message sent and appeared successfully');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('ClaudeInterface.sendMessage: Error sending message:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private static async clearInput(): Promise<void> {\r\n    const input = await this.findInput();\r\n    if (!input) {\r\n      throw new Error('Could not find input field');\r\n    }\r\n\r\n    // Clear the input field\r\n    this.setInputValue(input, '');\r\n  }\r\n\r\n  static async startDocumentCreation(): Promise<void> {\r\n    console.log('ClaudeInterface: Starting document creation');\r\n    \r\n    try {\r\n      // Wait for page to be ready\r\n      console.log('ClaudeInterface: Waiting for interface to be ready');\r\n      await this.waitForInterface();\r\n      console.log('ClaudeInterface: Interface is ready');\r\n\r\n      // Find Claude's input field\r\n      console.log('ClaudeInterface: Finding input field');\r\n      const input = await this.findInput();\r\n      if (!input) {\r\n        throw new Error('Could not find input field');\r\n      }\r\n      console.log('ClaudeInterface: Found input field:', input.tagName);\r\n\r\n      // Clear any existing input\r\n      await this.clearInput();\r\n\r\n      // Wait for initial messages to load and UI to stabilize\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n\r\n      // Ensure input is still available and focused\r\n      const finalInput = await this.findInput();\r\n      if (!finalInput) {\r\n        throw new Error('Input field not available after initialization');\r\n      }\r\n      finalInput.focus();\r\n\r\n      console.log('ClaudeInterface: Document creation completed successfully');\r\n    } catch (error) {\r\n      console.error('ClaudeInterface: Error during document creation:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async sendMessageToClaude(message: string): Promise<string> {\r\n    console.log('ClaudeInterface.sendMessageToClaude: Starting to send message:', message.substring(0, 50) + '...');\r\n    \r\n    try {\r\n      // Find Claude's input field\r\n      const input = await this.findInput();\r\n      if (!input) {\r\n        throw new Error('Could not find input field');\r\n      }\r\n\r\n      // Clear existing input\r\n      await this.clearInput();\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n      // Set the message\r\n      this.setInputValue(input, message);\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n      // Find and click the send button\r\n      const button = await this.findButton(input);\r\n      if (button) {\r\n        console.log('ClaudeInterface.sendMessageToClaude: Clicking send button');\r\n        button.click();\r\n      } else {\r\n        console.log('ClaudeInterface.sendMessageToClaude: Using Enter key fallback');\r\n        this.simulateEnterKey(input);\r\n      }\r\n\r\n      // Wait for and capture response\r\n      console.log('ClaudeInterface.sendMessageToClaude: Waiting for response');\r\n      const response = await this.waitForResponse();\r\n      \r\n      if (!response) {\r\n        throw new Error('No response received from Claude');\r\n      }\r\n\r\n      console.log('ClaudeInterface.sendMessageToClaude: Received response:', response.substring(0, 100) + '...');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('ClaudeInterface.sendMessageToClaude: Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private static async waitForResponse(timeout = 10000): Promise<string> {\r\n    console.log('ClaudeInterface.waitForResponse: Waiting for Claude to respond');\r\n    const start = Date.now();\r\n    \r\n    while (Date.now() - start < timeout) {\r\n      // Check for loading indicators\r\n      if (this.checkLoadingState()) {\r\n        console.log('ClaudeInterface.waitForResponse: Claude is still thinking...');\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n        continue;\r\n      }\r\n\r\n      // Updated selectors for Claude's modern interface\r\n      const responseSelectors = [\r\n        '.prose.w-full',\r\n        '.markdown.prose',\r\n        '[data-message-author-role=\"assistant\"]',\r\n        '.claude-message-content',\r\n        '.message-content',\r\n        '.prose'\r\n      ];\r\n\r\n      // Get all potential response elements\r\n      const responseElements = responseSelectors.flatMap(selector => \r\n        Array.from(document.querySelectorAll(selector))\r\n      );\r\n\r\n      if (responseElements.length > 0) {\r\n        // Get the last response element\r\n        const lastResponse = responseElements[responseElements.length - 1];\r\n        if (lastResponse && lastResponse.textContent) {\r\n          console.log('ClaudeInterface.waitForResponse: Found response:', lastResponse.textContent.substring(0, 100) + '...');\r\n          return lastResponse.textContent;\r\n        }\r\n      }\r\n\r\n      // Wait a bit before checking again\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n    }\r\n\r\n    console.log('ClaudeInterface.waitForResponse: Timed out waiting for response');\r\n    throw new Error('No response received from Claude within timeout period');\r\n  }\r\n\r\n  private static checkLoadingState(): boolean {\r\n    const loadingIndicators = [\r\n      '[data-loading=\"true\"]',\r\n      '.loading',\r\n      '.typing-indicator',\r\n      '[aria-label*=\"loading\"]',\r\n      '[class*=\"loading\"]',\r\n      '[class*=\"typing\"]',\r\n      '.animate-pulse'\r\n    ];\r\n    \r\n    return loadingIndicators.some(selector => {\r\n      const elements = document.querySelectorAll(selector);\r\n      return elements.length > 0;\r\n    });\r\n  }\r\n\r\n  private static async waitForInterface(timeout = 30000): Promise<void> {\r\n    console.log('ClaudeInterface.waitForInterface: Starting to wait for interface');\r\n    const start = Date.now();\r\n    let lastCheck = '';\r\n    \r\n    while (Date.now() - start < timeout) {\r\n      // Check for loading state\r\n      if (this.checkLoadingState()) {\r\n        console.log('ClaudeInterface.waitForInterface: Page is loading, waiting...');\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n        continue;\r\n      }\r\n      \r\n      // Check for interface readiness\r\n      const input = await this.findInput();\r\n      \r\n      const status = `Input: ${input ? 'Found' : 'Not Found'}`;\r\n      if (status !== lastCheck) {\r\n        console.log('ClaudeInterface.waitForInterface: Status -', status);\r\n        lastCheck = status;\r\n      }\r\n      \r\n      if (input) {\r\n        console.log('ClaudeInterface.waitForInterface: Input found, waiting for final load');\r\n        // Wait a bit more to ensure everything is fully loaded and interactive\r\n        await new Promise(resolve => setTimeout(resolve, 2000));\r\n        \r\n        // Double check the input is still available and interactive\r\n        const finalInput = await this.findInput();\r\n        if (finalInput) {\r\n          console.log('ClaudeInterface.waitForInterface: Interface is ready and interactive');\r\n          return;\r\n        } else {\r\n          console.log('ClaudeInterface.waitForInterface: Input disappeared during wait, continuing to search');\r\n        }\r\n      }\r\n\r\n      // Wait before next check\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n    }\r\n\r\n    const error = 'Timeout waiting for Claude interface to be ready';\r\n    console.error('ClaudeInterface.waitForInterface:', error);\r\n    throw new Error(error);\r\n  }\r\n\r\n  private static async findButton(input: HTMLElement): Promise<HTMLButtonElement | null> {\r\n    let button: HTMLButtonElement | null = null;\r\n\r\n    // Helper function to check if button is usable\r\n    const isUsableButton = (btn: Element): boolean => {\r\n      if (!(btn instanceof HTMLButtonElement)) return false;\r\n      const style = window.getComputedStyle(btn);\r\n      return !btn.disabled && \r\n             style.display !== 'none' && \r\n             style.visibility !== 'hidden' &&\r\n             style.opacity !== '0';\r\n    };\r\n\r\n    // Try to find button in parent first\r\n    if (input.parentElement) {\r\n      // Try specific button selectors\r\n      const buttonSelectors = [\r\n        'button[type=\"submit\"]',\r\n        'button[aria-label*=\"send\" i]',\r\n        'button[aria-label*=\"submit\" i]',\r\n        'button.send-button',\r\n        'button.submit-button',\r\n        'button.primary-button',\r\n        'button:has(svg)',\r\n        'button'\r\n      ];\r\n\r\n      for (const selector of buttonSelectors) {\r\n        const buttons = Array.from(input.parentElement.querySelectorAll(selector));\r\n        console.log(`ClaudeInterface.findButton: Found ${buttons.length} buttons with selector \"${selector}\" in parent`);\r\n\r\n        const usableButton = buttons.find(isUsableButton);\r\n        if (usableButton) {\r\n          button = usableButton as HTMLButtonElement;\r\n          console.log(`ClaudeInterface.findButton: Found usable button with selector \"${selector}\" in parent`);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // If no button found in parent, try siblings\r\n    if (!button) {\r\n      let sibling = input.nextElementSibling;\r\n      while (sibling && !button) {\r\n        if (isUsableButton(sibling)) {\r\n          button = sibling as HTMLButtonElement;\r\n          console.log('ClaudeInterface.findButton: Found button in siblings');\r\n        } else {\r\n          // Check for button within sibling\r\n          const nestedButtons = Array.from(sibling.querySelectorAll('button'));\r\n          const usableButton = nestedButtons.find(isUsableButton);\r\n          if (usableButton) {\r\n            button = usableButton as HTMLButtonElement;\r\n            console.log('ClaudeInterface.findButton: Found button nested in sibling');\r\n          }\r\n        }\r\n        sibling = sibling.nextElementSibling;\r\n      }\r\n    }\r\n\r\n    return button;\r\n  }\r\n\r\n  private static simulateEnterKey(element: HTMLElement): void {\r\n    console.log('ClaudeInterface.simulateEnterKey: Simulating Enter key press');\r\n    element.dispatchEvent(new KeyboardEvent('keydown', {\r\n      key: 'Enter',\r\n      code: 'Enter',\r\n      keyCode: 13,\r\n      which: 13,\r\n      bubbles: true,\r\n      cancelable: true,\r\n      composed: true\r\n    }));\r\n  }\r\n\r\n  private static setInputValue(input: HTMLElement, value: string): void {\r\n    if (input instanceof HTMLTextAreaElement) {\r\n      input.value = value;\r\n      input.dispatchEvent(new Event('input', { bubbles: true }));\r\n      console.log('ClaudeInterface.setInputValue: Set value on textarea');\r\n    } else if (input.hasAttribute('contenteditable')) {\r\n      input.textContent = value;\r\n      // Trigger React synthetic events\r\n      const events = ['beforeinput', 'input', 'change'];\r\n      for (const eventName of events) {\r\n        const event = new Event(eventName, { bubbles: true });\r\n        Object.defineProperty(event, 'target', { value: input });\r\n        Object.defineProperty(event, 'currentTarget', { value: input });\r\n        input.dispatchEvent(event);\r\n      }\r\n      console.log('ClaudeInterface.setInputValue: Set content on contenteditable');\r\n    }\r\n  }\r\n\r\n  private static async findInput(): Promise<HTMLElement | null> {\r\n    console.log('ClaudeInterface.findInput: Starting to search for input element');\r\n    \r\n    // Updated selectors for Claude's modern interface\r\n    const selectors = [\r\n      'div[contenteditable=\"true\"].ProseMirror',\r\n      'textarea.claude-input',\r\n      'div[contenteditable=\"true\"]',\r\n      'textarea[placeholder*=\"Send a message\"]',\r\n      'div[role=\"textbox\"]',\r\n      '[data-message-author-role=\"user\"] div[contenteditable=\"true\"]'\r\n    ];\r\n\r\n    for (const selector of selectors) {\r\n      console.log('ClaudeInterface.findInput: Trying selector:', selector);\r\n      const input = document.querySelector(selector) as HTMLElement;\r\n      if (input && this.isEditable(input)) {\r\n        console.log('ClaudeInterface.findInput: Found editable input with selector:', selector);\r\n        return input;\r\n      }\r\n    }\r\n\r\n    console.log('ClaudeInterface.findInput: No input element found');\r\n    return null;\r\n  }\r\n\r\n  private static isEditable(element: HTMLElement): boolean {\r\n    if (element instanceof HTMLTextAreaElement) {\r\n      return !element.disabled && !element.readOnly;\r\n    } else if (element.hasAttribute('contenteditable')) {\r\n      return element.getAttribute('contenteditable') === 'true' && \r\n             window.getComputedStyle(element).display !== 'none';\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static async handleUserInput(input: string): Promise<void> {\r\n    try {\r\n      // Send user's input and get response\r\n      const response = await this.sendMessage(input);\r\n      \r\n      // Check if response contains questions\r\n      if (response.includes('?')) {\r\n        await this.handleFollowUpQuestions(response);\r\n      } else {\r\n        await this.handleDocumentCreation(response);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error handling user input:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private static async handleFollowUpQuestions(response: string): Promise<void> {\r\n    // For now, just log that we received follow-up questions\r\n    console.log('Handling follow-up questions:', response);\r\n    // TODO: Implement follow-up question handling\r\n  }\r\n\r\n  private static async handleDocumentCreation(response: string): Promise<void> {\r\n    // For now, just log that we're creating the document\r\n    console.log('Creating document with response:', response);\r\n    // TODO: Implement document creation\r\n  }\r\n}\r\n","import { DocumentType } from '../shared/types';\r\nimport { ClaudeInterface } from './claudeInterface';\r\n\r\ninterface DocumentPrompt {\r\n  welcomeMessage: string;\r\n  placeholderText: string;\r\n}\r\n\r\nconst DOCUMENT_PROMPTS: Record<string, DocumentPrompt> = {\r\n  'game_vision': {\r\n    welcomeMessage: \"Hi, I'm here to help you find the vision of your game. Feel free to explain it to me however works best for you. Afterwards, I'll ask you some questions and we'll figure it out together.\",\r\n    placeholderText: \"Tell me about your game idea...\"\r\n  },\r\n  'core_game_concept': {\r\n    welcomeMessage: \"Let's outline your core game concept. What's the fundamental gameplay experience?\",\r\n    placeholderText: \"Describe the core gameplay loop, key mechanics, or main activities\"\r\n  },\r\n  'target_audience': {\r\n    welcomeMessage: \"Let's identify your target audience. Who are you making this game for?\",\r\n    placeholderText: \"Consider age groups, interests, gaming experience, platforms they use\"\r\n  },\r\n  'core_pillars_values': {\r\n    welcomeMessage: \"Let's establish your core pillars and values. What principles guide your game design?\",\r\n    placeholderText: \"List key values, design pillars, or guiding principles\"\r\n  },\r\n  'why_play_it': {\r\n    welcomeMessage: \"Let's explore why players will love your game. What makes it compelling?\",\r\n    placeholderText: \"Think about player motivations, rewards, and satisfaction\"\r\n  },\r\n  'what_should_they_feel': {\r\n    welcomeMessage: \"Let's define the emotional journey. How should players feel while playing?\",\r\n    placeholderText: \"Describe emotions, moods, or feelings you want to evoke\"\r\n  },\r\n  'unique_selling_points': {\r\n    welcomeMessage: \"Let's identify what makes your game unique. What sets it apart?\",\r\n    placeholderText: \"List unique features, innovations, or special qualities\"\r\n  },\r\n  'game_loop': {\r\n    welcomeMessage: \"Let's detail your game loop. What keeps players engaged moment to moment?\",\r\n    placeholderText: \"Describe core activities, feedback loops, and progression\"\r\n  },\r\n  'player_journey': {\r\n    welcomeMessage: \"Let's map the player's journey. How do they progress through your game?\",\r\n    placeholderText: \"Outline key stages, milestones, or story beats\"\r\n  },\r\n  'story_overview': {\r\n    welcomeMessage: \"Let's craft your story overview. What tale does your game tell?\",\r\n    placeholderText: \"Share plot points, character arcs, or narrative themes\"\r\n  },\r\n  'presentation': {\r\n    welcomeMessage: \"Let's plan your game's presentation. How will it look and feel?\",\r\n    placeholderText: \"Describe art style, audio direction, or visual themes\"\r\n  },\r\n  'key_questions': {\r\n    welcomeMessage: \"Let's address key questions about your game. What needs to be resolved?\",\r\n    placeholderText: \"List critical questions, concerns, or decisions to make\"\r\n  },\r\n  'core_design_details': {\r\n    welcomeMessage: \"Let's detail your core design. What are the essential mechanics?\",\r\n    placeholderText: \"Describe key systems, rules, or gameplay elements\"\r\n  },\r\n  'strategic_direction': {\r\n    welcomeMessage: \"Let's plan your strategic direction. Where is this game headed?\",\r\n    placeholderText: \"Outline goals, milestones, or development priorities\"\r\n  }\r\n};\r\n\r\nexport class PromptManager {\r\n  static getPromptForDocument(type: DocumentType): DocumentPrompt | null {\r\n    return DOCUMENT_PROMPTS[type] || null;\r\n  }\r\n\r\n  private static getSystemPrompt(type: DocumentType): string {\r\n    switch (type) {\r\n      case 'game_vision':\r\n        return `/task You are helping create a Game Vision document. After the user shares their initial idea, ask targeted follow-up questions to gather:\r\n- Game type, player count, and platform\r\n- Core gameplay and player fantasy\r\n- Emotional experience\r\n- Player motivation and rewards\r\n- Three unique elements that set the game apart\r\n\r\nUse their language and ideas while ensuring all elements are covered.`;\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  static async startDocumentCreation(type: DocumentType): Promise<void> {\r\n    console.log('PromptManager: Starting document creation for type:', type);\r\n    \r\n    const prompt = this.getPromptForDocument(type);\r\n    if (!prompt) {\r\n      console.error(`PromptManager: No prompt found for document type: ${type}`);\r\n      return;\r\n    }\r\n    console.log('PromptManager: Found prompt:', prompt);\r\n\r\n    try {\r\n      // Initialize Claude interface\r\n      console.log('PromptManager: Starting Claude interface');\r\n      await ClaudeInterface.startDocumentCreation();\r\n      \r\n      // Wait for UI to be ready\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Send the system prompt first (silently)\r\n      console.log('PromptManager: Sending system prompt');\r\n      const systemPrompt = this.getSystemPrompt(type);\r\n      await ClaudeInterface.sendMessage(systemPrompt, true);\r\n      \r\n      // Wait for system prompt to be processed\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Send the welcome message\r\n      console.log('PromptManager: Sending welcome message');\r\n      await ClaudeInterface.sendMessage(prompt.welcomeMessage);\r\n      \r\n      // Set up event listener for user input\r\n      const input = document.querySelector('.claude-input, [contenteditable=\"true\"]') as HTMLElement;\r\n      if (input) {\r\n        input.addEventListener('keydown', async (event) => {\r\n          if (event.key === 'Enter' && !event.shiftKey) {\r\n            event.preventDefault();\r\n            const userInput = input instanceof HTMLTextAreaElement ? \r\n              input.value : \r\n              input.textContent || '';\r\n            \r\n            if (userInput.trim()) {\r\n              await ClaudeInterface.handleUserInput(userInput);\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      console.log('PromptManager: Document creation setup completed');\r\n    } catch (error) {\r\n      console.error('PromptManager: Error during document creation:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n","// Document types supported by the system\r\nexport enum DocumentType {\r\n  GameVision = 'game_vision',\r\n  CoreGameConcept = 'core_game_concept',\r\n  TargetAudience = 'target_audience',\r\n  CorePillarsValues = 'core_pillars_values',\r\n  WhyPlayIt = 'why_play_it',\r\n  WhatShouldTheyFeel = 'what_should_they_feel',\r\n  UniqueSellingPoints = 'unique_selling_points',\r\n  GameLoop = 'game_loop',\r\n  PlayerJourney = 'player_journey',\r\n  StoryOverview = 'story_overview',\r\n  Presentation = 'presentation',\r\n  KeyQuestions = 'key_questions',\r\n  CoreDesignDetails = 'core_design_details',\r\n  StrategicDirection = 'strategic_direction'\r\n}\r\n\r\n// Document status\r\nexport enum DocumentStatus {\r\n  NotStarted = 'not_started',\r\n  InProgress = 'in_progress',\r\n  Completed = 'completed'\r\n}\r\n\r\n// Project structure\r\nexport interface GameProject {\r\n  id: string;\r\n  name: string;\r\n  createdAt: number;\r\n  updatedAt: number;\r\n  documents: Record<string, GameDocument>;\r\n}\r\n\r\n// Document structure\r\nexport interface GameDocument {\r\n  id: string;\r\n  projectId: string;\r\n  type: DocumentType;\r\n  title: string;\r\n  content: string;\r\n  status: DocumentStatus;\r\n  createdAt: number;\r\n  updatedAt: number;\r\n  versions: DocumentVersion[];\r\n}\r\n\r\n// Document version\r\nexport interface DocumentVersion {\r\n  versionNumber: number;\r\n  content: string;\r\n  createdAt: number;\r\n  notes: string;\r\n}\r\n\r\n// Message types for communication between components\r\nexport enum MessageType {\r\n  GetProjects = 'get_projects',\r\n  CreateProject = 'create_project',\r\n  UpdateProject = 'update_project',\r\n  DeleteProject = 'delete_project',\r\n  GetProject = 'get_project',\r\n  CreateDocument = 'create_document',\r\n  UpdateDocument = 'update_document',\r\n  GetDocument = 'get_document',\r\n  DeleteDocument = 'delete_document',\r\n  StartDocumentCreation = 'start_document_creation'\r\n}\r\n\r\n// Message structure\r\nexport interface Message {\r\n  type: MessageType;\r\n  payload: any;\r\n}\r\n\r\n// Response structure\r\nexport interface Response {\r\n  success: boolean;\r\n  data?: any;\r\n  error?: string;\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { MessageType, GameProject, DocumentType, DocumentStatus } from '../shared/types';\r\nimport { PromptManager } from '../prompts/promptManager';\r\nimport { ClaudeInterface } from '../prompts/claudeInterface';\r\n\r\n// Wait until page fully loaded\r\n// Inject CSS into the page\r\nfunction injectStyles() {\r\n  const styleLinks = [\r\n    chrome.runtime.getURL('css/sidebar.css'),\r\n    chrome.runtime.getURL('css/claude-messages.css')\r\n  ];\r\n\r\n  styleLinks.forEach(href => {\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.type = 'text/css';\r\n    link.href = href;\r\n    document.head.appendChild(link);\r\n  });\r\n\r\n  // Add custom styles for our interface\r\n  const customStyles = document.createElement('style');\r\n  customStyles.textContent = `\r\n    /* Hide Claude's default interface when in document mode */\r\n    body.gdds-document-mode main {\r\n      display: none !important;\r\n    }\r\n\r\n    /* Our custom interface */\r\n    .gdds-document-interface {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100vh;\r\n      background: rgb(17, 18, 19);\r\n      color: rgb(236, 236, 241);\r\n      max-width: 48rem;\r\n      margin: 0 auto;\r\n      padding: 0 2rem;\r\n      position: relative;\r\n    }\r\n\r\n    .gdds-header {\r\n      padding: 2rem 0;\r\n      margin-bottom: 1rem;\r\n      border-bottom: 1px solid rgba(255,255,255,0.1);\r\n    }\r\n\r\n    .gdds-header h1 {\r\n      margin: 0;\r\n      font-size: 1.5rem;\r\n      font-weight: 600;\r\n      color: rgb(236, 236, 241);\r\n    }\r\n\r\n    .gdds-chat-area {\r\n      flex: 1;\r\n      overflow-y: auto;\r\n      padding: 1rem 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 2rem;\r\n    }\r\n\r\n    .gdds-input-area {\r\n      padding: 2rem 0;\r\n      margin-top: 1rem;\r\n      border-top: 1px solid rgba(255,255,255,0.1);\r\n    }\r\n\r\n    .gdds-input-area {\r\n      position: relative;\r\n    }\r\n\r\n    .gdds-input-area textarea {\r\n      width: 100%;\r\n      min-height: 3rem;\r\n      padding: 0.75rem;\r\n      background: rgb(52, 53, 65);\r\n      color: rgb(236, 236, 241);\r\n      border: 1px solid rgba(255,255,255,0.1);\r\n      border-radius: 0.75rem;\r\n      resize: none;\r\n      font-size: 1rem;\r\n      line-height: 1.5;\r\n    }\r\n\r\n    .gdds-input-area::after {\r\n      content: \"⏎\";\r\n      position: absolute;\r\n      right: 1rem;\r\n      bottom: 1.25rem;\r\n      color: rgb(172, 172, 190);\r\n      font-size: 1.5rem;\r\n      pointer-events: none;\r\n      opacity: 0.8;\r\n      font-family: system-ui;\r\n    }\r\n\r\n    .gdds-input-area textarea:focus {\r\n      outline: none;\r\n      border-color: rgba(255,255,255,0.2);\r\n    }\r\n\r\n    .gdds-message {\r\n      padding: 1.5rem 0;\r\n      line-height: 1.6;\r\n      width: 100%;\r\n    }\r\n\r\n    .gdds-user-message {\r\n      background: rgb(52, 53, 65);\r\n      padding: 1rem;\r\n      border-radius: 0.5rem;\r\n    }\r\n\r\n    .gdds-assistant-message {\r\n      background: transparent;\r\n      color: rgb(209, 213, 219);\r\n    }\r\n\r\n    .gdds-assistant-message .prose {\r\n      max-width: none;\r\n      width: 100%;\r\n    }\r\n\r\n    .gdds-assistant-message .prose p {\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n  `;\r\n  document.head.appendChild(customStyles);\r\n}\r\n\r\n// Initialize when the page loads\r\nwindow.addEventListener('load', () => {\r\n  if (window.location.href.includes('claude.ai')) {\r\n    console.log('Game Development Document System loaded on Claude.ai');\r\n    injectStyles();\r\n    \r\n    // Wait for chat interface to be ready\r\n    const observer = new MutationObserver((mutations, obs) => {\r\n      const chatInterface = document.querySelector('main');\r\n      if (chatInterface) {\r\n        console.log('Chat interface found, injecting sidebar');\r\n        obs.disconnect();\r\n        \r\n        // Check if sidebar already exists\r\n        if (!document.getElementById('gdds-sidebar-wrapper')) {\r\n          injectSidebar();\r\n        }\r\n      }\r\n    });\r\n\r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  }\r\n});\r\n\r\n// Also check on URL changes (for SPA navigation)\r\nlet lastUrl = location.href; \r\nnew MutationObserver(() => {\r\n  const url = location.href;\r\n  if (url !== lastUrl) {\r\n    lastUrl = url;\r\n    if (url.includes('claude.ai')) {\r\n      // Re-inject sidebar if needed\r\n      if (!document.getElementById('gdds-sidebar-wrapper')) {\r\n        injectStyles();\r\n        injectSidebar();\r\n      }\r\n    }\r\n  }\r\n}).observe(document, {subtree: true, childList: true});\r\n\r\n// Add a message to Claude's interface\r\nfunction addClaudeMessage(message: string) {\r\n  // Create a new message that looks like it came from Claude\r\n  const messageContainer = document.createElement('div');\r\n  messageContainer.className = 'prose dark:prose-invert';\r\n  messageContainer.style.cssText = 'max-width: none; width: 100%;';\r\n  messageContainer.innerHTML = `\r\n    <div class=\"markdown prose w-full break-words dark:prose-invert light\">\r\n      <p>${message}</p>\r\n    </div>\r\n  `;\r\n\r\n  // Find Claude's message container and add our message\r\n  const messagesContainer = document.querySelector('main .flex.flex-col.items-center');\r\n  if (messagesContainer) {\r\n    messagesContainer.appendChild(messageContainer);\r\n    \r\n    // Find and scroll to the input\r\n    const input = document.querySelector('textarea.ProseMirror, [contenteditable=\"true\"]') as HTMLElement;\r\n    if (input) {\r\n      input.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    }\r\n  }\r\n}\r\n\r\n// Inject the sidebar into Claude's UI\r\nfunction injectSidebar() {\r\n  console.log('Attempting to inject sidebar');\r\n  \r\n  // Find main chat container to position relative to\r\n  const mainContent = document.querySelector('main');\r\n  if (!mainContent) {\r\n    console.log('Claude main content not found, retrying in 2 seconds');\r\n    setTimeout(injectSidebar, 2000);\r\n    return;\r\n  }\r\n  \r\n  // Create sidebar wrapper and elements\r\n  const sidebarWrapper = document.createElement('div');\r\n  sidebarWrapper.id = 'gdds-sidebar-wrapper';\r\n  sidebarWrapper.className = 'collapsed';\r\n  \r\n  const sidebar = document.createElement('div');\r\n  sidebar.id = 'gdds-sidebar';\r\n  sidebar.className = 'gdds-sidebar';\r\n  \r\n  const sidebarTab = document.createElement('div');\r\n  sidebarTab.id = 'gdds-sidebar-tab';\r\n  sidebarTab.className = 'gdds-sidebar-tab';\r\n  sidebarTab.innerHTML = `\r\n    <button class=\"gdds-button icon-only\" id=\"gdds-toggle-sidebar\">\r\n      <span class=\"gdds-icon\">→</span>\r\n    </button>\r\n  `;\r\n  \r\n  // Add elements to wrapper\r\n  sidebarWrapper.appendChild(sidebar);\r\n  sidebarWrapper.appendChild(sidebarTab);\r\n  \r\n  // Position wrapper after the main content\r\n  mainContent.parentElement?.insertBefore(sidebarWrapper, mainContent.nextSibling);\r\n  \r\n  // Initial HTML for sidebar\r\n  sidebar.innerHTML = `\r\n    <div class=\"gdds-gd-text\">GD</div>\r\n    <div class=\"gdds-sidebar-header\">\r\n      <h3>Game Documents</h3>\r\n      <button id=\"gdds-new-project\" class=\"gdds-button primary\">New Project</button>\r\n    </div>\r\n    <div class=\"gdds-projects-container\">\r\n      <div class=\"gdds-loading\">Loading projects...</div>\r\n    </div>\r\n  `;\r\n\r\n  // Setup event listeners\r\n  setupEventListeners();\r\n  \r\n  // Load projects\r\n  loadProjects();\r\n  \r\n  console.log('Sidebar injected successfully');\r\n}\r\n\r\n// Setup event listeners for sidebar\r\nfunction setupEventListeners() {\r\n  // New project button\r\n  const newProjectButton = document.getElementById('gdds-new-project');\r\n  if (newProjectButton) {\r\n    newProjectButton.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      console.log('New Project button clicked');\r\n      showNewProjectDialog();\r\n    });\r\n  }\r\n  \r\n  // Toggle sidebar button\r\n  const toggleButton = document.getElementById('gdds-toggle-sidebar');\r\n  if (toggleButton) {\r\n    toggleButton.addEventListener('click', toggleSidebar);\r\n  }\r\n}\r\n\r\n// Toggle sidebar visibility\r\nfunction toggleSidebar() {\r\n  const sidebar = document.getElementById('gdds-sidebar');\r\n  if (sidebar) {\r\n    sidebar.classList.toggle('collapsed');\r\n  }\r\n}\r\n\r\n// Show dialog to create new project\r\nfunction showNewProjectDialog(): void {\r\n  console.log('Showing new project dialog');\r\n  // Create dialog element\r\n  const dialog = document.createElement('div');\r\n  dialog.className = 'gdds-dialog';\r\n  dialog.innerHTML = `\r\n    <div class=\"gdds-dialog-content\">\r\n      <h3>Create New Project</h3>\r\n      <form id=\"gdds-new-project-form\">\r\n        <div class=\"gdds-form-group\">\r\n          <label for=\"project-name\">Project Name:</label>\r\n          <input type=\"text\" id=\"project-name\" required>\r\n        </div>\r\n        <div class=\"gdds-form-actions\">\r\n          <button type=\"button\" class=\"gdds-button secondary\" id=\"gdds-cancel-project\">Cancel</button>\r\n          <button type=\"submit\" class=\"gdds-button primary\">Create Project</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  `;\r\n  \r\n  // Add to DOM\r\n  document.body.appendChild(dialog);\r\n  \r\n  // Focus the input field\r\n  const nameInput = document.getElementById('project-name') as HTMLInputElement;\r\n  if (nameInput) {\r\n    nameInput.focus();\r\n  }\r\n  \r\n  // Setup form submission\r\n  const form = document.getElementById('gdds-new-project-form');\r\n  if (form) {\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n      \r\n      if (nameInput && nameInput.value.trim()) {\r\n        createProject(nameInput.value.trim());\r\n        closeDialog();\r\n      }\r\n    });\r\n  }\r\n  \r\n  // Setup cancel button\r\n  const cancelButton = document.getElementById('gdds-cancel-project');\r\n  if (cancelButton) {\r\n    cancelButton.addEventListener('click', closeDialog);\r\n  }\r\n  \r\n  // Close dialog function\r\n  function closeDialog() {\r\n    document.body.removeChild(dialog);\r\n  }\r\n}\r\n\r\ninterface ExtensionResponse {\r\n  success: boolean;\r\n  data?: any;\r\n  error?: any;\r\n}\r\n\r\n// Create new project\r\nasync function createProject(name: string) {\r\n  try {\r\n    // Check if extension context is valid\r\n    if (!chrome.runtime) {\r\n      console.log('Extension context invalid, reloading page');\r\n      window.location.reload();\r\n      return;\r\n    }\r\n\r\n    const response = await new Promise<ExtensionResponse>((resolve) => {\r\n      try {\r\n        chrome.runtime.sendMessage(\r\n          { type: MessageType.CreateProject, payload: { name } },\r\n          (response: ExtensionResponse) => {\r\n            if (chrome.runtime.lastError) {\r\n              resolve({ success: false, error: chrome.runtime.lastError });\r\n            } else {\r\n              resolve(response);\r\n            }\r\n          }\r\n        );\r\n      } catch (error) {\r\n        resolve({ success: false, error });\r\n      }\r\n    });\r\n\r\n    if (response.success) {\r\n      console.log('Project created:', response.data);\r\n      await loadProjects();\r\n    } else {\r\n      console.error('Failed to create project:', response.error);\r\n      showNotification('Error creating project', 'error');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error in createProject:', error);\r\n    showNotification('Error creating project. Please refresh the page and try again.', 'error');\r\n  }\r\n}\r\n\r\n// Load projects from storage\r\nasync function loadProjects() {\r\n  try {\r\n    // Check if extension context is valid\r\n    if (!chrome.runtime) {\r\n      console.log('Extension context invalid, reloading page');\r\n      window.location.reload();\r\n      return;\r\n    }\r\n\r\n    const projectsContainer = document.querySelector('.gdds-projects-container');\r\n    if (!projectsContainer) return;\r\n\r\n    projectsContainer.innerHTML = '<div class=\"gdds-loading\">Loading projects...</div>';\r\n    \r\n    const response = await new Promise<ExtensionResponse>((resolve) => {\r\n      try {\r\n        chrome.runtime.sendMessage(\r\n          { type: MessageType.GetProjects, payload: {} },\r\n          (response: ExtensionResponse) => {\r\n            if (chrome.runtime.lastError) {\r\n              resolve({ success: false, error: chrome.runtime.lastError });\r\n            } else {\r\n              resolve(response);\r\n            }\r\n          }\r\n        );\r\n      } catch (error) {\r\n        resolve({ success: false, error });\r\n      }\r\n    });\r\n\r\n    if (response.success) {\r\n      renderProjects(response.data || {});\r\n    } else {\r\n      console.error('Failed to load projects:', response.error);\r\n      projectsContainer.innerHTML = `\r\n        <div class=\"gdds-error\">\r\n          Error loading projects\r\n          <button class=\"gdds-button secondary\" onclick=\"window.location.reload()\">Refresh Page</button>\r\n        </div>\r\n      `;\r\n    }\r\n  } catch (error) {\r\n    console.error('Error in loadProjects:', error);\r\n    const projectsContainer = document.querySelector('.gdds-projects-container');\r\n    if (projectsContainer) {\r\n      projectsContainer.innerHTML = `\r\n        <div class=\"gdds-error\">\r\n          Error loading projects\r\n          <button class=\"gdds-button secondary\" onclick=\"window.location.reload()\">Refresh Page</button>\r\n        </div>\r\n      `;\r\n    }\r\n  }\r\n}\r\n\r\n// Render projects list\r\nfunction renderProjects(projects: Record<string, GameProject>) {\r\n  const projectsContainer = document.querySelector('.gdds-projects-container');\r\n  if (!projectsContainer) return;\r\n  \r\n  if (Object.keys(projects).length === 0) {\r\n    projectsContainer.innerHTML = `\r\n      <div class=\"gdds-empty-state\">\r\n        <p>No projects yet</p>\r\n        <p>Click \"New Project\" to get started</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n  \r\n  // Create projects list\r\n  const projectsList = document.createElement('div');\r\n  projectsList.className = 'gdds-projects-list';\r\n  \r\n  // Sort projects by creation date (newest first)\r\n  const sortedProjects = Object.values(projects).sort((a, b) => \r\n    b.createdAt - a.createdAt\r\n  );\r\n  \r\n  // Add each project\r\n  sortedProjects.forEach(project => {\r\n    const projectElement = document.createElement('div');\r\n    projectElement.className = 'gdds-project-item';\r\n    projectElement.dataset.projectId = project.id;\r\n    \r\n    projectElement.innerHTML = `\r\n      <div class=\"gdds-project-header\">\r\n        <h4>${project.name}</h4>\r\n        <div class=\"gdds-project-actions\">\r\n          <button class=\"gdds-button icon-only project-delete\" title=\"Delete Project\">\r\n            <img src=\"${chrome.runtime.getURL('assets/icon_trash.png')}\" alt=\"Delete\" width=\"16\" height=\"16\">\r\n          </button>\r\n          <button class=\"gdds-button icon-only project-expand\">\r\n            <span class=\"gdds-icon\">▼</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"gdds-project-documents\" style=\"display: none;\"></div>\r\n    `;\r\n    \r\n    projectsList.appendChild(projectElement);\r\n    \r\n    // Add event listeners for project actions\r\n    const expandButton = projectElement.querySelector('.project-expand');\r\n    if (expandButton) {\r\n      expandButton.addEventListener('click', () => {\r\n        toggleProjectDocuments(project.id);\r\n      });\r\n    }\r\n\r\n    const deleteButton = projectElement.querySelector('.project-delete');\r\n    if (deleteButton) {\r\n      deleteButton.addEventListener('click', () => {\r\n        showDeleteConfirmation(project);\r\n      });\r\n    }\r\n  });\r\n  \r\n  // Replace loading indicator with projects list\r\n  projectsContainer.innerHTML = '';\r\n  projectsContainer.appendChild(projectsList);\r\n}\r\n\r\n// Toggle project documents visibility\r\nfunction toggleProjectDocuments(projectId: string) {\r\n  const projectElement = document.querySelector(`[data-project-id=\"${projectId}\"]`);\r\n  if (!projectElement) return;\r\n  \r\n  const documentsContainer = projectElement.querySelector('.gdds-project-documents') as HTMLElement;\r\n  if (!documentsContainer) return;\r\n  \r\n  const isVisible = documentsContainer.style.display !== 'none';\r\n  documentsContainer.style.display = isVisible ? 'none' : 'block';\r\n  \r\n  // Update expand/collapse icon\r\n  const expandButton = projectElement.querySelector('.project-expand');\r\n  if (expandButton) {\r\n    const icon = expandButton.querySelector('.gdds-icon');\r\n    if (icon) {\r\n      icon.textContent = isVisible ? '▼' : '▲';\r\n    }\r\n  }\r\n  \r\n  // If expanding, load and render documents\r\n  if (!isVisible) {\r\n    loadProjectDocuments(projectId);\r\n  }\r\n}\r\n\r\n// Load document list for a project\r\nfunction loadProjectDocuments(projectId: string) {\r\n  chrome.runtime.sendMessage(\r\n    { type: MessageType.GetProject, payload: { projectId } },\r\n    (response) => {\r\n      if (response.success && response.data) {\r\n        renderProjectDocuments(response.data);\r\n      } else {\r\n        console.error('Failed to load project documents:', response.error);\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\n// Render documents for a project\r\nfunction renderProjectDocuments(project: GameProject) {\r\n  const projectElement = document.querySelector(`[data-project-id=\"${project.id}\"]`);\r\n  if (!projectElement) return;\r\n  \r\n  const documentsContainer = projectElement.querySelector('.gdds-project-documents');\r\n  if (!documentsContainer) return;\r\n  \r\n  // Clear previous content\r\n  documentsContainer.innerHTML = '';\r\n  \r\n  // Define the document type order\r\n  const documentTypeOrder = [\r\n    DocumentType.GameVision,\r\n    DocumentType.CoreGameConcept,\r\n    DocumentType.TargetAudience,\r\n    DocumentType.CorePillarsValues,\r\n    DocumentType.WhyPlayIt,\r\n    DocumentType.WhatShouldTheyFeel,\r\n    DocumentType.UniqueSellingPoints,\r\n    DocumentType.GameLoop,\r\n    DocumentType.PlayerJourney,\r\n    DocumentType.StoryOverview,\r\n    DocumentType.Presentation,\r\n    DocumentType.KeyQuestions,\r\n    DocumentType.CoreDesignDetails,\r\n    DocumentType.StrategicDirection\r\n  ];\r\n  \r\n  // Sort documents by the defined order\r\n  const sortedDocuments = Object.values(project.documents).sort((a, b) => {\r\n    return documentTypeOrder.indexOf(a.type as DocumentType) -\r\n           documentTypeOrder.indexOf(b.type as DocumentType);\r\n  });\r\n  \r\n  // Create document list\r\n  sortedDocuments.forEach(doc => {\r\n    const documentElement = document.createElement('div');\r\n    documentElement.className = `gdds-document-item status-${doc.status}`;\r\n    documentElement.dataset.documentId = doc.id;\r\n    \r\n    // Status text based on document status\r\n    const statusText = {\r\n      [DocumentStatus.NotStarted]: 'Not Started',\r\n      [DocumentStatus.InProgress]: 'In Progress',\r\n      [DocumentStatus.Completed]: 'Completed'\r\n    }[doc.status] || 'Unknown';\r\n    \r\n    documentElement.innerHTML = `\r\n      <div class=\"gdds-document-info\">\r\n        <span class=\"gdds-document-title\">${doc.title}</span>\r\n        <span class=\"gdds-document-status\">${statusText}</span>\r\n      </div>\r\n      <div class=\"gdds-document-actions\">\r\n        ${doc.status === DocumentStatus.NotStarted \r\n          ? '<button class=\"gdds-button small create-doc\">Create</button>'\r\n          : '<button class=\"gdds-button small view-doc\">View</button>'}\r\n        ${doc.status === DocumentStatus.Completed \r\n          ? '<button class=\"gdds-button small icon-only export-doc\"><span class=\"gdds-icon\">⬇</span></button>'\r\n          : ''}\r\n      </div>\r\n    `;\r\n    \r\n    documentsContainer.appendChild(documentElement);\r\n    \r\n    // Add event listeners for document actions\r\n    const createButton = documentElement.querySelector('.create-doc');\r\n    if (createButton) {\r\n      createButton.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        startDocumentCreation(project.id, doc.id);\r\n      });\r\n    }\r\n    \r\n    const viewButton = documentElement.querySelector('.view-doc');\r\n    if (viewButton) {\r\n      viewButton.addEventListener('click', () => {\r\n        viewDocument(project.id, doc.id);\r\n      });\r\n    }\r\n    \r\n    const exportButton = documentElement.querySelector('.export-doc');\r\n    if (exportButton) {\r\n      exportButton.addEventListener('click', () => {\r\n        exportDocument(project.id, doc.id);\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n// Inject our custom document interface\r\nfunction injectDocumentInterface(documentTitle: string) {\r\n  // Add document mode class to body\r\n  document.body.classList.add('gdds-document-mode');\r\n\r\n  // Create our interface\r\n  const interfaceElement = document.createElement('div');\r\n  interfaceElement.className = 'gdds-document-interface';\r\n  interfaceElement.innerHTML = `\r\n    <div class=\"gdds-header\">\r\n      <h1>${documentTitle}</h1>\r\n    </div>\r\n    <div class=\"gdds-chat-area\">\r\n      <div class=\"gdds-message gdds-assistant-message\">\r\n        <div class=\"prose dark:prose-invert\">\r\n          <p>Hi, I'm here to help you find the vision of your game. Feel free to explain it to me however works best for you. Afterwards, I'll ask you some questions and we'll figure it out together.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"gdds-input-area\">\r\n      <textarea placeholder=\"Tell me about your game idea...\" rows=\"3\"></textarea>\r\n    </div>\r\n  `;\r\n\r\n  // Find Claude's main content area\r\n  const mainContent = document.querySelector('main');\r\n  if (mainContent) {\r\n    // Add class to hide Claude's interface\r\n    mainContent.classList.add('claude-default-interface');\r\n    // Insert our interface before Claude's\r\n    mainContent.parentElement?.insertBefore(interfaceElement, mainContent);\r\n  }\r\n\r\n  // Setup input handling\r\n  const textarea = interfaceElement.querySelector('textarea');\r\n  if (textarea) {\r\n    textarea.addEventListener('keydown', (e) => {\r\n      if (e.key === 'Enter' && !e.shiftKey) {\r\n        e.preventDefault();\r\n        const message = textarea.value.trim();\r\n        if (message) {\r\n          // Add user message to chat\r\n          addMessage(message, 'user');\r\n          textarea.value = '';\r\n          \r\n          // Clear the prompt text\r\n          const promptText = document.querySelector('.gdds-chat-area > .gdds-message:first-child');\r\n          if (promptText) {\r\n            promptText.remove();\r\n          }\r\n\r\n          // Send to Claude and handle response\r\n          ClaudeInterface.sendMessageToClaude(message)\r\n            .then(() => {\r\n              // Message sent and response received successfully\r\n              console.log('Message handled by Claude');\r\n            })\r\n            .catch((error: Error) => {\r\n              console.error('Error sending message to Claude:', error);\r\n              showNotification('Error communicating with Claude', 'error');\r\n            });\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Add a message to our chat\r\nfunction addMessage(text: string, type: 'user' | 'assistant') {\r\n  const chatArea = document.querySelector('.gdds-chat-area');\r\n  if (chatArea) {\r\n    const message = document.createElement('div');\r\n    message.className = `gdds-message gdds-${type}-message`;\r\n    \r\n    if (type === 'assistant') {\r\n      message.innerHTML = `\r\n        <div class=\"prose dark:prose-invert\">\r\n          <p>${text}</p>\r\n        </div>\r\n      `;\r\n    } else {\r\n      message.textContent = text;\r\n    }\r\n    \r\n    chatArea.appendChild(message);\r\n    chatArea.scrollTop = chatArea.scrollHeight;\r\n  }\r\n}\r\n\r\n// Start document creation process\r\nasync function startDocumentCreation(projectId: string, documentId: string) {\r\n  console.log(`Starting document creation: Project ${projectId}, Document ${documentId}`);\r\n  \r\n  // Get the project and document\r\n  chrome.runtime.sendMessage(\r\n    { type: MessageType.GetProject, payload: { projectId } },\r\n    async (response) => {\r\n      if (response.success && response.data) {\r\n        const project = response.data;\r\n        const gameDoc = project.documents[documentId];\r\n        \r\n        if (gameDoc) {\r\n          try {\r\n            console.log('Starting document creation with type:', gameDoc.type);\r\n            \r\n            // Inject our custom interface\r\n            injectDocumentInterface(gameDoc.title);\r\n            \r\n            // Let the promptManager handle system prompt and welcome message\r\n            await PromptManager.startDocumentCreation(gameDoc.type as DocumentType);\r\n            console.log('Document creation started successfully');\r\n            \r\n            // Update document status\r\n            gameDoc.status = DocumentStatus.InProgress;\r\n            chrome.runtime.sendMessage(\r\n              { \r\n                type: MessageType.UpdateDocument, \r\n                payload: { document: gameDoc }\r\n              }\r\n            );\r\n\r\n            showNotification('Document creation started', 'success');\r\n          } catch (error) {\r\n            console.error('Error during document creation:', error);\r\n            showNotification('Error starting document creation', 'error');\r\n          }\r\n        } else {\r\n          showNotification('Error: Document not found', 'error');\r\n        }\r\n      } else {\r\n        showNotification('Error: Could not load project', 'error');\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\n// View document\r\nfunction viewDocument(projectId: string, documentId: string) {\r\n  console.log(`Viewing document: Project ${projectId}, Document ${documentId}`);\r\n  \r\n  // Will be implemented in next phase - for now just show notification\r\n  showNotification('Document viewing will be implemented in the next phase', 'info');\r\n}\r\n\r\n// Export document\r\nfunction exportDocument(projectId: string, documentId: string) {\r\n  console.log(`Exporting document: Project ${projectId}, Document ${documentId}`);\r\n  \r\n  // Will be implemented in next phase - for now just show notification\r\n  showNotification('Document export will be implemented in the next phase', 'info');\r\n}\r\n\r\n// Show delete confirmation dialog\r\nfunction showDeleteConfirmation(project: GameProject) {\r\n  const dialog = document.createElement('div');\r\n  dialog.className = 'gdds-dialog';\r\n  dialog.innerHTML = `\r\n    <div class=\"gdds-dialog-content\">\r\n      <h3>Delete Project</h3>\r\n      <p>Are you sure you want to delete \"${project.name}\"? This action cannot be undone.</p>\r\n      <div class=\"gdds-form-actions\">\r\n        <button type=\"button\" class=\"gdds-button secondary\" id=\"gdds-cancel-delete\">Cancel</button>\r\n        <button type=\"button\" class=\"gdds-button danger\" id=\"gdds-confirm-delete\">Delete</button>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  // Add to DOM\r\n  document.body.appendChild(dialog);\r\n\r\n  // Setup cancel button\r\n  const cancelButton = document.getElementById('gdds-cancel-delete');\r\n  if (cancelButton) {\r\n    cancelButton.addEventListener('click', closeDialog);\r\n  }\r\n\r\n  // Setup confirm button\r\n  const confirmButton = document.getElementById('gdds-confirm-delete');\r\n  if (confirmButton) {\r\n    confirmButton.addEventListener('click', () => {\r\n      deleteProject(project.id);\r\n      closeDialog();\r\n    });\r\n  }\r\n\r\n  // Close dialog function\r\n  function closeDialog() {\r\n    document.body.removeChild(dialog);\r\n  }\r\n}\r\n\r\n// Delete project\r\nfunction deleteProject(projectId: string) {\r\n  chrome.runtime.sendMessage(\r\n    { type: MessageType.DeleteProject, payload: { projectId } },\r\n    (response) => {\r\n      if (response.success) {\r\n        console.log('Project deleted:', projectId);\r\n        loadProjects();\r\n        showNotification('Project deleted successfully', 'success');\r\n      } else {\r\n        console.error('Failed to delete project:', response.error);\r\n        showNotification('Error deleting project', 'error');\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\n// Show notification\r\nfunction showNotification(message: string, type: 'success' | 'error' | 'info' = 'info') {\r\n  const notification = document.createElement('div');\r\n  notification.className = `gdds-notification ${type}`;\r\n  notification.innerHTML = `\r\n    <div class=\"gdds-notification-content\">\r\n      <span class=\"gdds-notification-message\">${message}</span>\r\n      <button class=\"gdds-notification-close\">✕</button>\r\n    </div>\r\n  `;\r\n  \r\n  // Add to DOM\r\n  document.body.appendChild(notification);\r\n  \r\n  // Add close button listener\r\n  const closeButton = notification.querySelector('.gdds-notification-close');\r\n  if (closeButton) {\r\n    closeButton.addEventListener('click', () => {\r\n      document.body.removeChild(notification);\r\n    });\r\n  }\r\n  \r\n  // Auto-remove after 5 seconds\r\n  setTimeout(() => {\r\n    if (document.body.contains(notification)) {\r\n      document.body.removeChild(notification);\r\n    }\r\n  }, 5000);\r\n}\r\n"],"names":[],"sourceRoot":""}