(()=>{"use strict";var e,t,n;!function(e){e.GameVision="game_vision",e.CoreGameConcept="core_game_concept",e.TargetAudience="target_audience",e.CorePillarsValues="core_pillars_values",e.WhyPlayIt="why_play_it",e.WhatShouldTheyFeel="what_should_they_feel",e.UniqueSellingPoints="unique_selling_points",e.GameLoop="game_loop",e.PlayerJourney="player_journey",e.StoryOverview="story_overview",e.Presentation="presentation",e.KeyQuestions="key_questions",e.CoreDesignDetails="core_design_details",e.StrategicDirection="strategic_direction"}(e||(e={})),function(e){e.NotStarted="not_started",e.InProgress="in_progress",e.Completed="completed"}(t||(t={})),function(e){e.GetProjects="get_projects",e.CreateProject="create_project",e.UpdateProject="update_project",e.DeleteProject="delete_project",e.GetProject="get_project",e.CreateDocument="create_document",e.UpdateDocument="update_document",e.GetDocument="get_document",e.DeleteDocument="delete_document",e.StartDocumentCreation="start_document_creation"}(n||(n={}));class o{static async saveAPIConfig(e){try{await chrome.storage.sync.set({[this.STORAGE_KEY]:e})}catch(e){throw console.error("Error saving API configuration:",e),e}}static async getAPIConfig(){try{return(await chrome.storage.sync.get(this.STORAGE_KEY))[this.STORAGE_KEY]||null}catch(e){throw console.error("Error getting API configuration:",e),e}}static async clearAPIConfig(){try{await chrome.storage.sync.remove(this.STORAGE_KEY)}catch(e){throw console.error("Error clearing API configuration:",e),e}}static async validateGeminiAPIKey(e){try{return(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({contents:[{parts:[{text:"Hello, this is a test message."}]}]})})).ok}catch(e){return console.error("Error validating Gemini API key:",e),!1}}}function a(e){const t=document.getElementById("api-config"),n=document.getElementById("connection-status");"claude"===e?(t&&(t.style.display="none"),n&&(n.style.display="block")):(t&&(t.style.display="block"),n&&(n.style.display="none"))}o.STORAGE_KEY="gdds_api_config",document.addEventListener("DOMContentLoaded",(async()=>{!function(){const e=document.getElementById("connection-status");e&&chrome.tabs.query({url:"https://claude.ai/*"},(t=>{t.length>0?(e.textContent="Connected to Claude.ai",e.style.color="#4caf50"):(e.textContent="Not connected to Claude.ai",e.style.color="#ff9800")}))}(),function(){const e=document.getElementById("project-count");e&&chrome.runtime.sendMessage({type:n.GetProjects,payload:{}},(t=>{if(t.success){const n=t.data||{},o=Object.keys(n).length;e.textContent=`Projects: ${o}`}else e.textContent="Error loading projects"}))}();const e=document.getElementById("open-claude");e&&e.addEventListener("click",(()=>{chrome.tabs.create({url:"https://claude.ai"})}));const t=document.getElementById("llm-select"),s=(document.getElementById("api-config"),document.getElementById("connection-status"),await o.getAPIConfig());s&&(t.value=s.provider,s.apiKey&&(document.getElementById("api-key-input").value=s.apiKey),a(s.provider)),t.addEventListener("change",(t=>{const n=t.target.value;a(n),e&&(e.textContent="claude"===n?"Open Claude.ai":"Open Document Interface");const o=document.getElementById("api-key-status");o&&(o.textContent="",o.className="api-key-status")}));const c=document.getElementById("save-key-button");c&&c.addEventListener("click",(async()=>{const e=t.value,n=document.getElementById("api-key-input").value.trim(),a=document.getElementById("api-key-status");if(n){c instanceof HTMLButtonElement&&(c.disabled=!0),a&&(a.textContent="Validating...",a.className="api-key-status");try{let t=!1;"gemini"===e&&(t=await o.validateGeminiAPIKey(n)),t?(await o.saveAPIConfig({provider:e,apiKey:n}),a&&(a.textContent="API key saved successfully",a.className="api-key-status success")):a&&(a.textContent="Invalid API key",a.className="api-key-status error")}catch(e){a&&(a.textContent="Error saving API key",a.className="api-key-status error")}finally{c instanceof HTMLButtonElement&&(c.disabled=!1)}}else a&&(a.textContent="Please enter an API key",a.className="api-key-status error")}))}))})();
//# sourceMappingURL=popup.js.map