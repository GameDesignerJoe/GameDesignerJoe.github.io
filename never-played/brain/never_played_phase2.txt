# Never Played - Phase 2 Design Document

## Overview

Phase 1 âœ… Complete: Display Steam library
Phase 2: Add smart features to help users find what to play next

---

## Phase 2 Features (In Order)

### 2A: Summary Stats
### 2B: Filter Toggle (Never Played Only)
### 2C: Sort Options
### 2D: Game Suggestion

---

## 2A: Summary Stats

**Goal:** Show overview numbers at the top of the library

### What to Display:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š YOUR LIBRARY STATS                          â”‚
â”‚                                                 â”‚
â”‚  Total Games: 553                               â”‚
â”‚  Never Played: 542                              â”‚
â”‚  Total Playtime: 8h 3m                          â”‚
â”‚  Completion Rate: 2%                            â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Calculations:

```typescript
interface LibraryStats {
  totalGames: number;
  neverPlayed: number;      // games with 0 playtime
  totalMinutes: number;
  completionRate: number;   // (played / total) * 100
}

function calculateStats(games: SteamGame[]): LibraryStats {
  const totalGames = games.length;
  const neverPlayed = games.filter(g => g.playtime_forever === 0).length;
  const totalMinutes = games.reduce((sum, g) => sum + g.playtime_forever, 0);
  const completionRate = Math.round(((totalGames - neverPlayed) / totalGames) * 100);
  
  return {
    totalGames,
    neverPlayed,
    totalMinutes,
    completionRate
  };
}

function formatPlaytime(minutes: number): string {
  const hours = Math.floor(minutes / 60);
  const mins = minutes % 60;
  
  if (hours > 0 && mins > 0) {
    return `${hours}h ${mins}m`;
  } else if (hours > 0) {
    return `${hours}h`;
  } else {
    return `${mins}m`;
  }
}
```

### Implementation:

**Update `src/app/page.tsx`:**

Add this component before the games list:

```typescript
function LibraryStats({ games }: { games: SteamGame[] }) {
  const stats = calculateStats(games);
  
  return (
    <div className="bg-gray-800 rounded-lg p-6 mb-6">
      <h2 className="text-2xl font-bold mb-4">ğŸ“Š Your Library Stats</h2>
      
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div className="bg-gray-700 rounded p-4">
          <div className="text-gray-400 text-sm mb-1">Total Games</div>
          <div className="text-2xl font-bold">{stats.totalGames}</div>
        </div>
        
        <div className="bg-gray-700 rounded p-4">
          <div className="text-gray-400 text-sm mb-1">Never Played</div>
          <div className="text-2xl font-bold text-red-400">{stats.neverPlayed}</div>
        </div>
        
        <div className="bg-gray-700 rounded p-4">
          <div className="text-gray-400 text-sm mb-1">Total Playtime</div>
          <div className="text-2xl font-bold">{formatPlaytime(stats.totalMinutes)}</div>
        </div>
        
        <div className="bg-gray-700 rounded p-4">
          <div className="text-gray-400 text-sm mb-1">Tried</div>
          <div className="text-2xl font-bold text-green-400">{stats.completionRate}%</div>
        </div>
      </div>
    </div>
  );
}
```

---

## 2B: Filter Toggle

**Goal:** Let users show only never-played games

### UI:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Filters:                                       â”‚
â”‚  â˜‘ Show only never played (542 games)          â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation:

**Update `src/app/page.tsx`:**

Add state for filter:

```typescript
const [showOnlyNeverPlayed, setShowOnlyNeverPlayed] = useState(false);
```

Add filter function:

```typescript
const filteredGames = showOnlyNeverPlayed
  ? games.filter(g => g.playtime_forever === 0)
  : games;
```

Add checkbox component:

```typescript
function FilterControls({ 
  showOnlyNeverPlayed, 
  setShowOnlyNeverPlayed,
  neverPlayedCount 
}: {
  showOnlyNeverPlayed: boolean;
  setShowOnlyNeverPlayed: (value: boolean) => void;
  neverPlayedCount: number;
}) {
  return (
    <div className="bg-gray-800 rounded-lg p-4 mb-4">
      <label className="flex items-center gap-2 cursor-pointer">
        <input
          type="checkbox"
          checked={showOnlyNeverPlayed}
          onChange={(e) => setShowOnlyNeverPlayed(e.target.checked)}
          className="w-4 h-4 rounded"
        />
        <span className="text-sm">
          Show only never played 
          <span className="text-gray-400 ml-1">
            ({neverPlayedCount} games)
          </span>
        </span>
      </label>
    </div>
  );
}
```

Update the render to use `filteredGames` instead of `games`:

```typescript
{filteredGames.map((game) => (
  // ... existing game card code
))}
```

---

## 2C: Sort Options

**Goal:** Let users sort games by different criteria

### Sort Options:

1. **Name (A-Z)** - Alphabetical
2. **Name (Z-A)** - Reverse alphabetical
3. **Playtime (Low to High)** - Never played first
4. **Playtime (High to Low)** - Most played first
5. **App ID (Old to New)** - Oldest games first (approximate)
6. **App ID (New to Old)** - Newest games first

### UI:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sort by: [Name (A-Z)        â–¼]                 â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation:

**Update `src/app/page.tsx`:**

Add state for sort option:

```typescript
type SortOption = 'name-asc' | 'name-desc' | 'playtime-asc' | 'playtime-desc' | 'appid-asc' | 'appid-desc';

const [sortBy, setSortBy] = useState<SortOption>('name-asc');
```

Add sorting function:

```typescript
function sortGames(games: SteamGame[], sortBy: SortOption): SteamGame[] {
  const sorted = [...games];
  
  switch (sortBy) {
    case 'name-asc':
      return sorted.sort((a, b) => a.name.localeCompare(b.name));
    case 'name-desc':
      return sorted.sort((a, b) => b.name.localeCompare(a.name));
    case 'playtime-asc':
      return sorted.sort((a, b) => a.playtime_forever - b.playtime_forever);
    case 'playtime-desc':
      return sorted.sort((a, b) => b.playtime_forever - a.playtime_forever);
    case 'appid-asc':
      return sorted.sort((a, b) => a.appid - b.appid);
    case 'appid-desc':
      return sorted.sort((a, b) => b.appid - a.appid);
    default:
      return sorted;
  }
}
```

Update filtering to include sorting:

```typescript
const filteredAndSortedGames = sortGames(
  showOnlyNeverPlayed
    ? games.filter(g => g.playtime_forever === 0)
    : games,
  sortBy
);
```

Add sort dropdown component:

```typescript
function SortControls({ 
  sortBy, 
  setSortBy 
}: {
  sortBy: SortOption;
  setSortBy: (value: SortOption) => void;
}) {
  return (
    <div className="bg-gray-800 rounded-lg p-4 mb-4">
      <label className="block mb-2 text-sm font-medium">
        Sort by:
      </label>
      <select
        value={sortBy}
        onChange={(e) => setSortBy(e.target.value as SortOption)}
        className="w-full md:w-auto px-4 py-2 bg-gray-700 rounded border border-gray-600 focus:border-blue-500 focus:outline-none"
      >
        <option value="name-asc">Name (A-Z)</option>
        <option value="name-desc">Name (Z-A)</option>
        <option value="playtime-asc">Playtime (Low to High)</option>
        <option value="playtime-desc">Playtime (High to Low)</option>
        <option value="appid-asc">App ID (Oldest First)</option>
        <option value="appid-desc">App ID (Newest First)</option>
      </select>
      
      {sortBy.includes('appid') && (
        <p className="text-xs text-gray-400 mt-2">
          * App ID is an approximate measure of game age
        </p>
      )}
    </div>
  );
}
```

**Better UI:** Combine Filter and Sort into one controls bar:

```typescript
function LibraryControls({ 
  showOnlyNeverPlayed, 
  setShowOnlyNeverPlayed,
  sortBy,
  setSortBy,
  neverPlayedCount 
}: {
  showOnlyNeverPlayed: boolean;
  setShowOnlyNeverPlayed: (value: boolean) => void;
  sortBy: SortOption;
  setSortBy: (value: SortOption) => void;
  neverPlayedCount: number;
}) {
  return (
    <div className="bg-gray-800 rounded-lg p-4 mb-4">
      <div className="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
        
        {/* Filter */}
        <label className="flex items-center gap-2 cursor-pointer">
          <input
            type="checkbox"
            checked={showOnlyNeverPlayed}
            onChange={(e) => setShowOnlyNeverPlayed(e.target.checked)}
            className="w-4 h-4 rounded"
          />
          <span className="text-sm">
            Show only never played 
            <span className="text-gray-400 ml-1">
              ({neverPlayedCount} games)
            </span>
          </span>
        </label>
        
        {/* Sort */}
        <div className="flex items-center gap-2">
          <label className="text-sm font-medium whitespace-nowrap">
            Sort by:
          </label>
          <select
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value as SortOption)}
            className="px-3 py-1.5 bg-gray-700 rounded border border-gray-600 text-sm focus:border-blue-500 focus:outline-none"
          >
            <option value="name-asc">Name (A-Z)</option>
            <option value="name-desc">Name (Z-A)</option>
            <option value="playtime-asc">Playtime (Low to High)</option>
            <option value="playtime-desc">Playtime (High to Low)</option>
            <option value="appid-asc">App ID (Oldest First)</option>
            <option value="appid-desc">App ID (Newest First)</option>
          </select>
        </div>
        
      </div>
      
      {sortBy.includes('appid') && (
        <p className="text-xs text-gray-400 mt-2">
          * App ID sorting is approximate - lower IDs are generally older games
        </p>
      )}
    </div>
  );
}
```

---

## 2D: Game Suggestion

**Goal:** Highlight one game the user should try next

### Suggestion Logic:

```typescript
function getSuggestion(games: SteamGame[]): SteamGame | null {
  const neverPlayed = games.filter(g => g.playtime_forever === 0);
  
  if (neverPlayed.length === 0) {
    return null;
  }
  
  // Strategy: Find oldest never-played game (using App ID as proxy)
  const oldestNeverPlayed = neverPlayed.sort((a, b) => a.appid - b.appid)[0];
  
  return oldestNeverPlayed;
}
```

### Alternative Suggestion Strategies:

```typescript
// Random never-played
function getRandomSuggestion(games: SteamGame[]): SteamGame | null {
  const neverPlayed = games.filter(g => g.playtime_forever === 0);
  if (neverPlayed.length === 0) return null;
  return neverPlayed[Math.floor(Math.random() * neverPlayed.length)];
}

// Alphabetically first never-played
function getAlphaFirstSuggestion(games: SteamGame[]): SteamGame | null {
  const neverPlayed = games.filter(g => g.playtime_forever === 0);
  if (neverPlayed.length === 0) return null;
  return neverPlayed.sort((a, b) => a.name.localeCompare(b.name))[0];
}
```

### UI:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ TRY THIS NEXT                               â”‚
â”‚                                                 â”‚
â”‚  [ğŸ®] Counter-Strike                           â”‚
â”‚                                                 â”‚
â”‚  Why this game?                                â”‚
â”‚  â€¢ Never played (0 hours)                      â”‚
â”‚  â€¢ One of your oldest games (App ID: 10)       â”‚
â”‚                                                 â”‚
â”‚  [ğŸ² Suggest Another]  [â–¶ Open in Steam]       â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation:

**Update `src/app/page.tsx`:**

Add state for suggestion:

```typescript
const [suggestion, setSuggestion] = useState<SteamGame | null>(null);
```

Update suggestion when games load:

```typescript
useEffect(() => {
  if (games.length > 0) {
    setSuggestion(getSuggestion(games));
  }
}, [games]);
```

Add suggestion component:

```typescript
function SuggestionCard({ 
  game, 
  onNewSuggestion 
}: { 
  game: SteamGame | null;
  onNewSuggestion: () => void;
}) {
  if (!game) return null;
  
  return (
    <div className="bg-gradient-to-r from-blue-900 to-purple-900 rounded-lg p-6 mb-6 border-2 border-blue-500">
      <h2 className="text-2xl font-bold mb-4 flex items-center gap-2">
        ğŸ¯ TRY THIS NEXT
      </h2>
      
      <div className="flex items-center gap-4 mb-4">
        {game.img_icon_url && (
          <img
            src={`https://media.steampowered.com/steamcommunity/public/images/apps/${game.appid}/${game.img_icon_url}.jpg`}
            alt={game.name}
            className="w-16 h-16 rounded"
          />
        )}
        <div>
          <h3 className="text-xl font-bold">{game.name}</h3>
          <p className="text-gray-300 text-sm">App ID: {game.appid}</p>
        </div>
      </div>
      
      <div className="bg-gray-900/50 rounded p-3 mb-4">
        <p className="text-sm font-semibold mb-2">Why this game?</p>
        <ul className="text-sm space-y-1">
          <li>â€¢ Never played (0 hours)</li>
          <li>â€¢ One of your oldest games (Low App ID)</li>
        </ul>
      </div>
      
      <div className="flex gap-2">
        <button
          onClick={onNewSuggestion}
          className="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-medium transition"
        >
          ğŸ² Suggest Another
        </button>
        <a
          href={`steam://run/${game.appid}`}
          className="px-4 py-2 bg-green-600 hover:bg-green-700 rounded font-medium transition"
        >
          â–¶ Open in Steam
        </a>
      </div>
    </div>
  );
}
```

Add "Suggest Another" functionality:

```typescript
const handleNewSuggestion = () => {
  const neverPlayed = games.filter(g => g.playtime_forever === 0);
  if (neverPlayed.length === 0) return;
  
  // Get random never-played game
  const random = neverPlayed[Math.floor(Math.random() * neverPlayed.length)];
  setSuggestion(random);
};
```

---

## Complete Phase 2 Layout:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             NEVER PLAYED                        â”‚
â”‚        Display Your Steam Library               â”‚
â”‚                                                 â”‚
â”‚  [Enter Steam ID] [Get Games]                  â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š YOUR LIBRARY STATS                          â”‚
â”‚  Total: 553 | Never Played: 542 | Time: 8h 3m  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ TRY THIS NEXT                               â”‚
â”‚  Counter-Strike                                 â”‚
â”‚  [Suggest Another] [Open in Steam]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ Show only never played  |  Sort: [dropdown] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  YOUR LIBRARY (542 games showing)               â”‚
â”‚                                                 â”‚
â”‚  ğŸ® Game 1 - Never Played                       â”‚
â”‚  ğŸ® Game 2 - Never Played                       â”‚
â”‚  ...                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Implementation Order for Cline:

### Step 2A: Stats (First)
1. Add `calculateStats()` function
2. Add `formatPlaytime()` function
3. Add `<LibraryStats>` component
4. Place above game list

### Step 2B: Filter (Second)
1. Add `showOnlyNeverPlayed` state
2. Add filter logic to game list
3. Add `<FilterControls>` component

### Step 2C: Sort (Third)
1. Add `sortBy` state
2. Add `sortGames()` function
3. Combine with filter in `filteredAndSortedGames`
4. Merge filter and sort into `<LibraryControls>` component

### Step 2D: Suggestion (Fourth)
1. Add `suggestion` state
2. Add `getSuggestion()` function
3. Add `<SuggestionCard>` component
4. Add "Suggest Another" handler
5. Place below stats, above controls

---

## Phase 2 Complete Success Criteria:

âœ… Stats show accurate counts and playtime  
âœ… Filter checkbox works (shows only never played)  
âœ… Sort dropdown changes game order  
âœ… Suggestion highlights one game to try  
âœ… "Suggest Another" gives different random game  
âœ… "Open in Steam" button launches game  
âœ… All features work together smoothly  

---

## Future Phase 3 Ideas (Not Now):

- Save suggestion history (localStorage)
- Add more suggestion strategies
- Show game ratings (requires external API)
- Estimate completion time (requires HLTB API)
- Compare with friends' libraries
- Track progress over time

**But for now: Focus on Phase 2 features in order!**

---

## Instructions for Cline:

Build Phase 2 features in this exact order:
1. **2A: Stats** - Add summary stats component
2. **2B: Filter** - Add never-played filter checkbox
3. **2C: Sort** - Add sort dropdown with 6 options
4. **2D: Suggestion** - Add suggestion card with "try this next"

Each feature builds on the previous one. Test after each step before moving to the next.

Keep all code in `src/app/page.tsx` for now - no need to extract components yet.

Use the existing Tailwind styling to match Phase 1's dark theme.