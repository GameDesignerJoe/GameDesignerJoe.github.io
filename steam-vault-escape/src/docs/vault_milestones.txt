# Steam Vault Escape - Milestone Plan

**Version:** 1.0  
**Date:** December 28, 2024  
**Status:** Planning Phase

---

## Overview

This document outlines the step-by-step development roadmap for **Steam Vault Escape**, a standalone idle clicker game separate from the Steam Stash analytics tool.

**Project Scope:**
- **Separate codebase** from Steam Stash
- **New Next.js project** (steam-vault-escape)
- **Independent deployment** on Vercel
- **Standalone experience** (can link to Steam Stash but not required)

**Development Philosophy:**
- Build incrementally (prove each system works before adding more)
- Test frequently (catch issues early)
- Stay flexible (adjust based on playtesting)
- Focus on core loop (bells and whistles come later)

---

## Milestone 0: Foundation Setup

**Goal:** Create new standalone project for Steam Vault Escape.

### **Tasks:**
- ‚¨ú Create new Next.js project: `npx create-next-app@latest steam-vault-escape`
- ‚¨ú Configure TypeScript and TailwindCSS
- ‚¨ú Set up new Git repository
- ‚¨ú Create new Vercel project (separate from Steam Stash)
- ‚¨ú Create folder structure (components, lib, types, docs)
- ‚¨ú Add Steam API key to environment variables
- ‚¨ú Copy design documents to `src/docs/` folder
- ‚¨ú Create initial commit

### **Deliverables:**
- Fresh Next.js project named `steam-vault-escape`
- Working dev server (`npm run dev`)
- New Vercel deployment (blank page is fine)
- Project structure documented
- Design docs in project

### **Success Criteria:**
- Dev server runs without errors
- Can deploy to Vercel successfully
- Steam API key configured and secure
- Completely separate from Steam Stash codebase

### **Note:**
This is a **new project**, not an extension of Steam Stash (never-played). Start fresh to keep codebases clean and independent.

---

## Milestone 1: Steam Library Integration

**Goal:** Fetch and display user's Steam library in basic list format.

### **Tasks:**

**1.1: Steam API Route**
- Create `/api/steam-library` endpoint
- Implement server-side Steam API fetch
- Add error handling (invalid ID, API failure)
- Test with multiple Steam IDs

**1.2: Client-Side Fetch**
- Add Steam ID input field
- Add "Get Games" button
- Fetch library on button click
- Display loading state
- Handle errors gracefully

**1.3: Basic Game List**
- Create `GameCard` component (simple version)
- Display game name and hours played
- Show game count
- Sort alphabetically by default

**1.4: localStorage Caching**
- Save fetched library to localStorage
- Cache Steam ID for convenience
- Load cached data on mount
- Show "last updated" timestamp

### **Deliverables:**
- Working Steam library fetch
- Basic game list display
- Cached library data
- Error handling for API failures

### **Success Criteria:**
- Can enter Steam ID and fetch library
- Games display with name and playtime
- Library persists across page refreshes
- Errors show helpful messages

### **Testing:**
- Test with small library (10 games)
- Test with large library (300+ games)
- Test with invalid Steam ID
- Test with private profile
- Test offline (using cached data)

---

## Milestone 2: Game State System

**Goal:** Implement the three game states (Locked, Playable, Liberation Key).

### **Tasks:**

**2.1: State Classification**
- Implement `classifyGame()` function
- Create `VaultGameState` interface
- Calculate unlock costs, passive rates, click values
- Add Vault Controller fake game

**2.2: Visual States**
- Design locked game appearance (darkened, bars overlay)
- Design playable game appearance (full color, glow)
- Design Liberation Key appearance (gold shimmer)
- Add state indicators (üîí/‚úÖ/‚≠ê)

**2.3: Game Card States**
- Update `GameCard` component with state-specific rendering
- Show unlock cost on locked games
- Show passive/click rates on playable games
- Show "LIBERATION KEY" badge on unplayed games

**2.4: State Filtering**
- Add filter buttons: [All] [Locked] [Playable] [Keys]
- Implement filter logic
- Update game count per filter

### **Deliverables:**
- Three distinct visual states for games
- State classification working correctly
- Vault Controller inserted in library
- Basic filtering by state

### **Success Criteria:**
- All games correctly categorized by state
- Visual distinction clear and obvious
- Vault Controller appears first in list
- Filters work correctly

### **Testing:**
- Verify state logic with various playtime values
- Check Vault Controller always shows as playable
- Test filters with mixed library (all three states)
- Verify unlock costs calculated correctly

---

## Milestone 3: Core Clicking Mechanic

**Goal:** Implement featured game selection and clicking for points.

### **Tasks:**

**3.1: Points System**
- Add points state (`useState`)
- Display points prominently at top
- Format with commas (12,847)
- Save points to localStorage

**3.2: Featured Game System**
- Add "Featured Game" section above grid
- Click any playable game ‚Üí sets as featured
- Display featured game enlarged
- Show click value prominently

**3.3: Click Handler**
- Create big [CLICK TO PLAY] button
- Increment points by click value on click
- Add click feedback animation (+X floats up)
- Throttle clicks (prevent spam)

**3.4: localStorage Persistence**
- Save featured game selection
- Save points every 5 seconds
- Load state on mount
- Auto-save on page unload

### **Deliverables:**
- Working points system
- Featured game selection
- Satisfying click feedback
- Persistent state across sessions

### **Success Criteria:**
- Clicking adds correct point value
- Points display updates immediately
- Featured game selection works smoothly
- State persists across page refreshes

### **Testing:**
- Click 100 times, verify points accurate
- Change featured game, verify click value updates
- Close and reopen page, verify state loads
- Test with high-hour game (1000+ hours click value)

---

## Milestone 4: Unlock System

**Goal:** Implement spending points to unlock locked games.

### **Tasks:**

**4.1: Unlock Logic**
- Add `unlockedGames` state (array of App IDs)
- Implement unlock handler (spend points, add to unlocked)
- Update game state when unlocked (locked ‚Üí playable)
- Save unlocked games to localStorage

**4.2: Unlock UI**
- Add [UNLOCK] button on locked games
- Disable button if can't afford
- Show cost in red if unaffordable, green if affordable
- Add hover tooltip: "Need X more points"

**4.3: Unlock Animation**
- Bars shatter/lift when unlocked
- Game transitions from dark to full color
- Show "+X/sec passive started!" notification
- Flash game card briefly

**4.4: Unlock Validation**
- Prevent unlocking if insufficient points
- Deduct correct cost
- Update passive income total immediately

### **Deliverables:**
- Working unlock system
- Clear affordability indicators
- Satisfying unlock animation
- Persistent unlock state

### **Success Criteria:**
- Can unlock games when affordable
- Cannot unlock when too expensive
- Points deducted correctly
- Unlocked games stay unlocked across sessions

### **Testing:**
- Unlock cheapest game (verify cost/points)
- Try unlocking without enough points (should fail)
- Unlock 5 games in a row (verify all stay unlocked)
- Close/reopen page (verify unlocks persist)

---

## Milestone 5: Passive Income System

**Goal:** Implement passive point generation from unlocked games.

### **Tasks:**

**5.1: Passive Calculation**
- Implement `calculateTotalPassive()` function
- Sum all unlocked games' passive rates
- Display total: "+X/sec from Y games"
- Update in real-time

**5.2: Passive Income Loop**
- Create 1-second interval (useEffect)
- Check if tab is focused (`document.hasFocus()`)
- Add passive income to points if focused
- Stop generating if tab not focused

**5.3: Passive Display**
- Show "+X/sec" next to points
- Update dynamically as games unlock
- Show per-game passive rate on cards
- Highlight high-earning games

**5.4: Balance Testing**
- Verify income rates feel right
- Test with 1 game, 10 games, 50 games
- Ensure no performance issues

### **Deliverables:**
- Working passive income system
- Tab-focus detection
- Real-time passive display
- Smooth performance

### **Success Criteria:**
- Points increase by correct amount per second
- Passive stops when tab loses focus
- Total passive updates when games unlock
- No lag or stuttering

### **Testing:**
- Unlock 5 games, watch passive for 1 minute
- Switch to another tab, verify passive stops
- Return to tab, verify passive resumes
- Unlock expensive game, verify large passive jump

---

## Milestone 6: Liberation Key System

**Goal:** Implement playing unplayed games to unlock them.

### **Tasks:**

**6.1: Liberation Key Detection**
- Implement `detectNewUnlocks()` function
- Compare cached library with fresh fetch
- Detect games crossing 30-minute threshold
- Calculate bonus points

**6.2: Manual Refresh**
- Add [üîÑ Refresh Library] button
- Fetch fresh library from Steam
- Run unlock detection
- Update cached library

**6.3: Auto-Refresh**
- Implement 5-minute auto-refresh timer
- Only refresh if tab is focused
- Run unlock detection on auto-refresh
- Show subtle notification on refresh

**6.4: Celebration Modal**
- Create `CelebrationModal` component
- Show when Liberation Key unlocks
- Display: game name, minutes played, bonus, passive rate
- Animate entrance (scale up, confetti?)
- Add [AWESOME!] button to close

**6.5: Play on Steam Button**
- Add [PLAY ON STEAM] button on Liberation Key cards
- Open Steam app: `window.open('steam://run/${appId}')`
- Show tooltip: "Play 30 min to unlock"
- Optional: Modal explaining the flow

### **Deliverables:**
- Liberation Key unlock detection
- Manual and auto library refresh
- Celebration modal on unlock
- Steam launch integration

### **Success Criteria:**
- Playing a game for 30+ min triggers unlock
- Celebration modal appears correctly
- Bonus points awarded accurately
- Game transitions from key to playable

### **Testing:**
- Play a Steam game for 30 min (real test!)
- Return to app, click refresh
- Verify unlock detected correctly
- Verify bonus points awarded
- Test with multiple keys unlocked at once

---

## Milestone 7: Grid Layout & Virtual Scrolling

**Goal:** Implement proper Steam-style grid with performance optimization.

### **Tasks:**

**7.1: Steam Capsule Art**
- Replace game names with box art
- Use Steam CDN: `library_600x900.jpg`
- Add lazy loading
- Handle missing images (placeholder)

**7.2: Grid Layout**
- Create responsive grid (6/4/2 per row)
- Use CSS Grid or Flexbox
- Maintain aspect ratio
- Add spacing/padding

**7.3: Virtual Scrolling**
- Install `@tanstack/react-virtual`
- Implement row virtualization
- Calculate 6 games per row
- Add overscan for smooth scrolling

**7.4: Sorting**
- Add sort dropdown
- Sort options: Cost, Hours, Name, Status
- Update grid on sort change
- Remember sort preference

### **Deliverables:**
- Beautiful Steam-style grid
- High-quality game art
- Smooth scrolling (even with 500+ games)
- Working sort and filter

### **Success Criteria:**
- Grid looks like Steam library
- No lag scrolling with large libraries
- Images load smoothly
- Sort/filter work together

### **Testing:**
- Test with 10, 100, 300, 500 games
- Scroll rapidly up and down
- Change sort/filter combinations
- Check mobile responsiveness

---

## Milestone 8: Victory Condition

**Goal:** Implement 100% completion detection and victory screen.

### **Tasks:**

**8.1: Completion Detection**
- Check if all games unlocked
- Trigger on every unlock
- One-time trigger (don't spam)
- Save victory state to localStorage

**8.2: Victory Screen**
- Create `VictoryScreen` component
- Full-screen modal
- Display stats:
  - Total games
  - Liberation Keys played
  - Total points earned
  - Most expensive unlock
  - Highest passive game
  - Total passive rate
- Confetti animation?
- Add [CONTINUE PLAYING] button

**8.3: Stats Calculation**
- Track Liberation Keys played
- Track most expensive unlock
- Track highest passive game
- Calculate playtime (estimate)

**8.4: Victory State**
- Save to localStorage
- Allow reopening victory screen
- Add "View Victory Screen" option after win

### **Deliverables:**
- Working victory detection
- Beautiful victory screen
- Accurate stats display
- Persistent victory state

### **Success Criteria:**
- Victory triggers at 100% unlock
- Stats are accurate
- Victory screen looks polished
- Can continue playing after victory

### **Testing:**
- Use dev panel to unlock all games
- Verify victory screen appears
- Check all stats for accuracy
- Continue playing after victory

---

## Milestone 9: Polish & UX

**Goal:** Add visual polish, animations, and quality-of-life features.

### **Tasks:**

**9.1: Animations**
- Click feedback (button press, +X float)
- Unlock animation (bars shatter)
- Liberation Key shimmer effect
- Hover effects on cards
- Smooth transitions

**9.2: Loading States**
- Skeleton loaders for games
- Spinner during library fetch
- Progress bar for refreshes
- Disabled states during operations

**9.3: Error Handling**
- Steam API failure banner
- Invalid Steam ID message
- Network error retry button
- localStorage quota warning

**9.4: Notifications/Toasts**
- "Points saved" confirmation
- "Library refreshed" notice
- "New unlock detected!" toast
- Error messages

**9.5: Responsive Design**
- Mobile layout (2 games per row)
- Tablet layout (4 games per row)
- Touch-friendly buttons
- Readable text sizes

### **Deliverables:**
- Smooth animations throughout
- Clear loading indicators
- Helpful error messages
- Mobile-friendly layout

### **Success Criteria:**
- App feels polished and professional
- No jarring transitions
- Errors are clear and actionable
- Works well on mobile

### **Testing:**
- Test all animations
- Trigger all loading states
- Force all error conditions
- Test on mobile devices

---

## Milestone 10: Dev Panel

**Goal:** Build hidden testing/debugging tools.

### **Tasks:**

**10.1: Dev Panel UI**
- Add gear icon (bottom-right corner)
- Click to toggle panel
- Overlay panel with dark background
- Close on outside click

**10.2: Dev Tools**
- [+1000 Points] button
- [+10000 Points] button
- [Unlock All Cheap Games] button
- [Unlock All Games] button
- [Speed Up Time 10x] toggle
- [Reset All Progress] button (with confirmation)

**10.3: Dev State**
- Save dev mode preference
- Show/hide dev indicators
- Disable in production? (optional)

**10.4: Testing Features**
- Force unlock detection
- Simulate 30 min playtime
- Jump to victory screen
- Clear localStorage

### **Deliverables:**
- Working dev panel
- All testing shortcuts functional
- Hidden from normal users
- Useful for rapid testing

### **Success Criteria:**
- Dev panel speeds up testing
- Easy to add points/unlock games
- Reset works cleanly
- Doesn't interfere with normal gameplay

### **Testing:**
- Use dev panel for all future testing
- Verify reset clears everything
- Test speed multiplier

---

## Milestone 11: Final Testing & Balance

**Goal:** Playtest extensively and tune economy balance.

### **Tasks:**

**11.1: Balance Testing**
- Test early game (0-10 unlocked)
- Test mid game (10-50 unlocked)
- Test late game (50+ unlocked)
- Verify progression feels good

**11.2: Formula Tuning**
- Adjust unlock costs if needed
- Adjust passive rates if needed
- Adjust click values if needed
- Adjust Liberation bonuses if needed

**11.3: Playtesting**
- Play through full game naturally
- Time to first unlock (<5 min?)
- Time to 50% unlock
- Time to 100% unlock
- Adjust based on feel

**11.4: Edge Cases**
- Library with 0 unplayed games
- Library with only 1-2 games
- Library with 1000+ games
- Games with 10,000+ hours

**11.5: Performance**
- Test with largest libraries
- Monitor memory usage
- Check for leaks
- Optimize if needed

### **Deliverables:**
- Balanced economy
- Smooth progression curve
- No game-breaking bugs
- Stable performance

### **Success Criteria:**
- Game feels fun to play
- Progression neither too fast nor too slow
- No critical bugs
- Works with all library sizes

### **Testing:**
- Multiple playthroughs
- Different library sizes
- Different play styles (clicker vs idle)
- Different Steam accounts

---

## Milestone 12: Launch Preparation

**Goal:** Prepare for public release.

### **Tasks:**

**12.1: Documentation**
- Write README.md
- Add license
- Document setup for contributors
- Create changelog

**12.2: Deployment**
- Final Vercel deployment
- Test production build
- Verify environment variables
- Set up custom domain (optional)

**12.3: Analytics (Optional)**
- Add basic event tracking
- Track key metrics:
  - Games unlocked
  - Liberation Keys played
  - Victory reached
- Privacy-friendly (no PII)

**12.4: Sharing**
- Screenshot/GIF for social media
- Write project description
- Post to relevant subreddits
- Share on Twitter/Discord

### **Deliverables:**
- Production-ready deployment
- Project documentation
- Optional analytics setup
- Shareable content

### **Success Criteria:**
- App is live and accessible
- No critical bugs in production
- Documentation is clear
- Ready to share publicly

---

## Post-Launch Roadmap

### **Phase 2: Visual Enhancements**
- Particle effects (confetti, sparkles)
- Advanced animations (unlock, click)
- Sound effects (click, unlock, victory)
- Music (optional, ambient vault theme)
- Dark/light mode toggle

### **Phase 3: Achievements System**
- Milestone achievements (10, 50, 100 unlocked)
- Special achievements (unlock 1000-hr game)
- Speed achievements (unlock 10 in 1 hour)
- Completionist achievements (100% library)
- Achievement showcase/badges

### **Phase 4: Stats Dashboard**
- Progress graphs (unlocks over time)
- Playtime breakdown by state
- Income history chart
- Most-clicked game
- Export stats as image

### **Phase 5: Social Features**
- Compare with friends
- Leaderboards (optional)
- Share victory screen
- Steam Group integration

### **Phase 6: Advanced Features**
- Prestige system (reset with bonuses)
- Daily challenges
- Game recommendations
- Integration with other platforms (GOG, Epic)
- **Cross-link to Steam Stash:** Optional integration/linking between tools

---

## Success Metrics

### **MVP Success:**
- ‚úÖ Can fetch Steam library
- ‚úÖ Three game states work
- ‚úÖ Clicking generates points
- ‚úÖ Unlocking works correctly
- ‚úÖ Passive income functional
- ‚úÖ Liberation Keys detected
- ‚úÖ Victory screen at 100%
- ‚úÖ State persists across sessions

### **Quality Benchmarks:**
- Load time <2 seconds
- Smooth 60 FPS scrolling
- No bugs in core loop
- Works on mobile
- Positive initial feedback

### **Long-term Goals:**
- Users actually play unplayed games
- Return rate >30%
- Average 50%+ library unlocked
- Victory rate >10%

---

## Risk Management

### **Technical Risks:**
- **Steam API downtime:** Mitigation: Cached data, graceful degradation
- **Performance issues:** Mitigation: Virtual scrolling, optimization
- **Storage quota:** Mitigation: Compress data, clear old cache

### **Design Risks:**
- **Progression too slow:** Mitigation: Tunable formulas, playtesting
- **Liberation Keys not compelling:** Mitigation: Better rewards, animations
- **Complexity confusing:** Mitigation: Minimal tutorial, clear UI

### **Scope Risks:**
- **Feature creep:** Mitigation: Strict MVP scope, post-launch roadmap
- **Over-engineering:** Mitigation: Build simplest version first
- **Time overruns:** Mitigation: No deadlines, flexible milestones

---

## Conclusion

This milestone plan provides a clear path from empty project to fully functional idle game. Each milestone builds on the previous one, proving each system works before adding more complexity.

The key is staying focused on the core loop:
1. Click games to earn points
2. Unlock locked games
3. Play Liberation Keys for fastest progression
4. Reach 100% library unlock

Everything else is secondary. Build the foundation solid, then add polish.

**Next Steps:**
1. Complete Milestone 0 (Foundation)
2. Build Milestone 1 (Steam Integration)
3. Iterate through milestones in order
4. Playtest frequently, adjust as needed
5. Launch when core loop feels fun!

---

**Document Version History:**
- v1.0 (2024-12-28): Initial milestone plan