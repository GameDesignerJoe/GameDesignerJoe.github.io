<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ship Life - Prototype</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÄ</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/rooms.css">
    <link rel="stylesheet" href="css/map.css">
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/cinematics.css">
    <link rel="stylesheet" href="css/debug.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav id="navigation-bar" class="hidden">
        <!-- Dynamically populated -->
    </nav>
    
    <!-- Active Guardian Display -->
    <div id="active-guardian-display" class="hidden">
        <div id="guardian-portrait"></div>
        <div id="guardian-name"></div>
    </div>
    
    <!-- Room Title -->
    <div id="room-title"></div>
    
    <!-- Room Container -->
    <div id="room-container">
        <!-- Dynamically populated based on current room -->
    </div>
    
    <!-- Workstation Sidebar -->
    <div id="workstation-sidebar" class="sidebar hidden">
        <div class="sidebar-header">
            <h3 id="workstation-title"></h3>
            <button class="close-sidebar" onclick="closeSidebar()">√ó</button>
        </div>
        <div class="sidebar-content">
            <div id="recipe-list" class="recipe-list">
                <!-- Recipe cards -->
            </div>
            <div id="recipe-details" class="recipe-details">
                <p class="select-prompt">Select a recipe or upgrade to view details</p>
            </div>
        </div>
    </div>
    
    <!-- Conversation UI -->
    <div id="conversation-ui" class="modal hidden">
        <div class="conversation-container">
            <div class="conversation-portraits">
                <div id="portrait-left" class="portrait"></div>
                <div id="portrait-right" class="portrait"></div>
            </div>
            <div class="conversation-text">
                <div id="speaker-name"></div>
                <div id="dialogue-text"></div>
                <button id="next-button" onclick="advanceDialogue()">Next</button>
            </div>
        </div>
    </div>
    
    <!-- Mission Results Modal -->
    <div id="mission-results" class="modal hidden">
        <div class="results-container">
            <h2 id="results-title"></h2>
            <div id="results-status"></div>
            <div id="results-rewards"></div>
            <button id="continue-button" onclick="continueFromResults()">Continue</button>
        </div>
    </div>
    
    <!-- Loadout Management Modal -->
    <div id="loadout-modal" class="modal hidden">
        <div class="loadout-modal-container">
            <div class="loadout-header">
                <div id="loadout-guardian-info">
                    <div id="loadout-guardian-portrait"></div>
                    <div id="loadout-guardian-name"></div>
                </div>
                <button class="close-modal-btn" onclick="closeLoadoutModal()">√ó</button>
            </div>
            
            <div class="loadout-content">
                <!-- Equipment Slots -->
                <div class="loadout-slots-section">
                    <h3>Equipment & Aspects</h3>
                    <div class="loadout-slots">
                        <div class="loadout-slot equipment-slot" data-slot-type="equipment" data-slot-index="0">
                            <div class="slot-label">Equipment</div>
                            <div class="slot-content empty">Empty</div>
                        </div>
                        <div class="loadout-slot aspect-slot" data-slot-type="aspect" data-slot-index="0">
                            <div class="slot-label">Aspect 1</div>
                            <div class="slot-content empty">Empty</div>
                        </div>
                        <div class="loadout-slot aspect-slot" data-slot-type="aspect" data-slot-index="1">
                            <div class="slot-label">Aspect 2</div>
                            <div class="slot-content empty">Empty</div>
                        </div>
                        <div class="loadout-slot aspect-slot" data-slot-type="aspect" data-slot-index="2">
                            <div class="slot-label">Aspect 3</div>
                            <div class="slot-content empty">Empty</div>
                        </div>
                    </div>
                </div>
                
                <!-- Item Picker -->
                <div class="loadout-picker-section">
                    <h3 id="picker-title">Select a slot</h3>
                    <div id="item-picker" class="item-picker">
                        <p class="picker-hint">Click a slot above to choose items</p>
                    </div>
                </div>
            </div>
            
            <div class="loadout-footer">
                <button class="btn-primary" onclick="closeLoadoutModal()">Done</button>
            </div>
        </div>
    </div>
    
    <!-- Quit Dialog -->
    <div id="quit-dialog" class="modal hidden">
        <div class="dialog-container">
            <h2>Quit to Landing Page?</h2>
            <p>Progress has been auto-saved.</p>
            <div class="dialog-buttons">
                <button onclick="confirmQuit()">Yes</button>
                <button onclick="cancelQuit()">No</button>
            </div>
        </div>
    </div>
    
    <!-- Debug Menu -->
    <div id="debug-menu" class="hidden">
        <div class="debug-header">
            <h3>Debug Menu</h3>
            <button class="close-debug" onclick="toggleDebugMenu()">√ó</button>
        </div>
        <div class="debug-tabs">
            <button class="tab-btn active" data-tab="console" onclick="switchDebugTab('console')">Console</button>
            <button class="tab-btn" data-tab="panels" onclick="switchDebugTab('panels')">Panels</button>
        </div>
        <div id="debug-console" class="debug-tab">
            <div id="debug-output"></div>
            <input type="text" id="debug-input" placeholder="Enter command..." />
        </div>
        <div id="debug-panels" class="debug-tab hidden">
            <button onclick="debugViewBlackboard()">View Blackboard</button>
            <button onclick="debugViewInventory()">View Inventory</button>
            <button onclick="debugValidateData()">üîç Validate All Data Files</button>
            <button onclick="debugResetSave()">Reset Save</button>
            <button onclick="debugGiveResources()">Give 100 of Each Resource</button>
            <button onclick="debugGiveAllBlueprints()">üìò Learn All Blueprints</button>
            <button onclick="debugGiveAllItems()">Give ALL Items (Full Inventory)</button>
            <hr style="margin: 15px 0; border-color: rgba(255,255,255,0.2);">
            <button onclick="debugToggleMusic()" id="debug-toggle-music">Toggle Music</button>
            <button onclick="debugToggleSFX()" id="debug-toggle-sfx">Toggle SFX</button>
            <button onclick="debugTestSFX()">Test Sound Effect</button>
            <hr style="margin: 15px 0; border-color: rgba(255,255,255,0.2);">
            <button onclick="executeDebugCommand('reroll_anomalies')">‚ö° Reroll Anomalies</button>
        </div>
    </div>
    
    <!-- Mute Toggle Button -->
    <button id="mute-toggle" onclick="toggleMute()" title="Mute/Unmute All Audio">üîä</button>
    
    <!-- Debug Toggle Button -->
    <button id="debug-toggle" onclick="toggleDebugMenu()">‚öôÔ∏è</button>
    
    <!-- Scripts -->
    <script src="js/audio.js?v=10"></script>
    <script src="js/validation.js?v=10"></script>
    <script src="js/state.js?v=10"></script>
    <script src="js/loadout.js?v=10"></script>
    <script src="js/statistics.js?v=10"></script>
    <script src="js/trophies.js?v=10"></script>
    <script src="js/ui.js?v=10"></script>
    <script src="js/activities.js?v=10"></script>
    <script src="js/map.js?v=10"></script>
    <script src="js/rooms.js?v=10"></script>
    <script src="js/guardians.js?v=10"></script>
    <script src="js/missions.js?v=10"></script>
    <script src="js/inventory.js?v=10"></script>
    <script src="js/workstations.js?v=10"></script>
    <script src="js/conversations.js?v=10"></script>
    <script src="js/cinematics.js?v=10"></script>
    <script src="js/debug.js?v=10"></script>
    <script src="js/main.js?v=10"></script>
</body>
</html>
